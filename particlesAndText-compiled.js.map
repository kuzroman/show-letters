{"version":3,"sources":["particlesAndText.js"],"names":[],"mappings":"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","file":"particlesAndText-compiled.js","sourcesContent":["\"use strict\";\r\n\r\n(function ($) {\r\n    let o = $({});\r\n    $.subscribe = function () {\r\n        o.bind.apply(o, arguments);\r\n    };\r\n    $.unsubscribe = function () {\r\n        o.unbind.apply(o, arguments);\r\n    };\r\n    $.publish = function () {\r\n        o.trigger.apply(o, arguments);\r\n    };\r\n})(jQuery);\r\n\r\n//////////////////////////////////////////////////////////\r\n\r\n//var isPaused = false;\r\n//window.onclick = function() {\r\n//    isPaused = !isPaused;\r\n//};\r\n\r\n\r\n$(function () {\r\n    engravingText.init();\r\n});\r\n\r\nwindow.engravingText = {};\r\n\r\nengravingText.p = { // params\r\n    W: window.innerWidth,\r\n    H: window.innerHeight,\r\n    bits: [],\r\n    isBitsFell: false, // ������� �����?\r\n    letters: [],\r\n    bitsSpeed: 15,\r\n    letterSpeed: 10\r\n};\r\nengravingText.p.canvas = document.getElementById('loader');\r\nengravingText.p.ctx = engravingText.p.canvas.getContext(\"2d\");\r\n\r\n\r\nengravingText.init = function () {\r\n    this.events();\r\n\r\n    this.p.canvas.width = this.p.W;\r\n    this.p.canvas.height = this.p.H;\r\n\r\n    let aim = new this.LoaderLetters();\r\n    aim.addText();\r\n    aim.showText();\r\n\r\n};\r\n\r\nengravingText.events = function () {\r\n    let isAnimStarted = false;\r\n\r\n    $.subscribe('letterShowed', (ev, positions) => {\r\n        this.addBits(positions);\r\n        if (!isAnimStarted) {\r\n            isAnimStarted = true;\r\n            this.animationBits();\r\n        }\r\n    });\r\n};\r\n\r\nengravingText.LoaderLetters = class {\r\n    constructor() {\r\n        this.speed = engravingText.p.letterSpeed || 0;\r\n        this.x = 0;\r\n        this.y = 0;\r\n\r\n        this.typingCenter = $('#typingCenter');\r\n        this.box = this.typingCenter.find('div');\r\n        this.description = $('#represent').text();\r\n    }\r\n\r\n    addText() {\r\n        let el, len = this.description.length;\r\n        this.box.html('');\r\n        for (let i = 0; i < len; i++) {\r\n            if (this.description[i] == '|') el = $('<br>');\r\n            else el = $('<i>').text(this.description[i]);\r\n            this.box.append(el);\r\n            if (len - 1 <= i) {\r\n                engravingText.p.letters = this.createAims();\r\n            }\r\n        }\r\n    }\r\n\r\n    showText() {\r\n        let i = 0, isInt\r\n            , letters = engravingText.p.letters\r\n            , len = letters.length\r\n            ;\r\n\r\n        isInt = setInterval(() => {\r\n            // draw letters\r\n            if (i <= len - 1) {\r\n                letters[i]['el'].css({opacity: 1});\r\n                this.x = letters[i].x1;\r\n                this.y = letters[i].y2;\r\n\r\n                $.publish('letterShowed', {x: this.x, y: this.y});\r\n            }\r\n\r\n            if (engravingText.p.isBitsFell) clearInterval(isInt);\r\n\r\n            i++;\r\n        }, this.speed);\r\n\r\n    }\r\n\r\n    createAims() {\r\n        let objList = [];\r\n        this.typingCenter.find('i').each(function (n) {\r\n            let s = $(this); // s = symbol\r\n\r\n            objList[n] = {\r\n                el: s,\r\n                killed: false,\r\n                x1: ~~s.offset().left,\r\n                x2: ~~( s.offset().left + s.width() ),\r\n                y1: ~~s.offset().top,\r\n                y2: ~~( s.offset().top + s.height() )\r\n            };\r\n        });\r\n        return objList;\r\n    }\r\n};\r\n\r\n\r\n/////////////////////////////////////////////////////////////\r\n\r\n\r\nengravingText.addBits = function (positions) {\r\n    for (let i = 0, bit; i < 3; i++) {\r\n        bit = new this.Bit(positions.x, positions.y);\r\n        this.p.bits.push(bit);\r\n    }\r\n};\r\nengravingText.animationBits = function () {\r\n    setInterval(() => {\r\n        //if (isPaused) return;\r\n        engravingText.clearCanvas();\r\n        engravingText.updateBit();\r\n    }, this.p.bitsSpeed)\r\n};\r\n\r\n\r\nengravingText.Bit = class {\r\n    constructor(currentX, currentY) {\r\n        this.x = currentX || 0;\r\n        this.y = currentY || 0;\r\n        this.g = -Math.round(Math.random() * 50) / 10; // gravity\r\n    }\r\n\r\n    draw() {\r\n        let p = engravingText.p;\r\n        p.ctx.fillStyle = '#fff';\r\n        let size = Math.random() * 3 + 1;\r\n        p.ctx.fillRect(this.x, this.y, size, size);\r\n    }\r\n};\r\n\r\nengravingText.clearCanvas = function () {\r\n    this.p.ctx.fillStyle = \"#272822\";\r\n    this.p.ctx.fillRect(0, 0, this.p.W, this.p.H);\r\n};\r\n\r\nengravingText.updateBit = function () {\r\n    let bits = this.p.bits;\r\n\r\n    for (let j = 0, b; j < bits.length; j++) {\r\n        b = bits[j];\r\n        b.y -= b.g;\r\n        b.g -= 0.1;\r\n\r\n        if (this.p.H < b.y) bits.splice(j, 1);\r\n        b.draw();\r\n    }\r\n\r\n    if (!bits.length) {\r\n        this.p.isBitsFell = true;\r\n    }\r\n};"]}